"use strict";var AR=window.AR=window.AR||{};AR.fullProfileFields=["first-name","last-name","email-address","summary","specialties","location","picture-url","public-profile-url","last-modified-timestamp","proposal-comments","associations","interests","publications","patents","languages","skills","certifications","educations","courses","volunteer","three-current-positions","three-past-positions","num-recommenders","recommendations-received","date-of-birth","member-url-resources","related-profile-views","honors-awards","phone-numbers","bound-account-types","im-accounts","main-address","twitter-accounts","primary-twitter-account"],AR.renderDate=function(a,b){if(!a)return"not set";var c="",d="",e="";if(a.month){var f=["January","February","March","April","May","June","July","August","September","October","November","December"];c=f[a.month-1]}return a.day&&(d=a.day),a.year&&(e=a.year),b||(b="%m %d, %Y"),a.day?a.year||(b="%m %d"):b="%m %Y",b.replace("%Y",e).replace("%m",c).replace("%d",d)},AR.getPhone=function(a){if(!a||a.length<1)return"Provide upon request";for(var b=["mobile","work","home"],c=0;c<a.length;c++){var d=a[c];d.index=b.indexOf(d.type)}return a.sort(function(a,b){return a.index-b.index})[0].phoneNumber},AR.LatexText=function(a,b){function c(a){var b,e,h=!1,i=a;return f.forEach(function(j,k){h||(b=a.search(g[k]),e=a.match(g[k]),-1!==b&&(i=c(a.slice(0,b))+d[f[k]]+c(a.slice(b+e.length)),h=!0))}),i}if(!a)return"TBD";var d={"\n":"\\\\","{":"\\{","}":"\\}","\\":"\\textbackslash{}","#":"\\#",$:"\\$","%":"\\%","&":"\\&","^":"\\textasciicircum{}",_:"\\_","~":"\\textasciitilde{}"};b&&b.linebreak===!1&&delete d["\n"];var e=function(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},f=Object.keys(d),g=f.map(function(a){return e(a)});return c(a)},AR.processProfile=function(a){if(a=a||{},a.positions={_total:0,values:[]},a.threeCurrentPositions&&a.threeCurrentPositions.values)for(var b=0;b<a.threeCurrentPositions.values.length;b++)a.positions.values.push(a.threeCurrentPositions.values[b]),a.positions._total++;if(a.threePastPositions&&a.threePastPositions.values)for(var b=0;b<a.threePastPositions.values.length;b++)a.positions.values.push(a.threePastPositions.values[b]),a.positions._total++;return a};var AR=window.AR=window.AR||{};AR.templates=[{id:"two-column",preview:"/templates/two-column/preview.jpg",src:"/templates/two-column/resume.tex",type:"LaTeX",author:{name:"LaTeXTemplates",url:"http://www.latextemplates.com/"}},{id:"plasmati",preview:"/templates/plasmati/preview.png",src:"/templates/plasmati/resume.tex",type:"LaTeX",author:{name:"LaTeXTemplates",url:"http://www.latextemplates.com/"}}];var AR=window.AR=window.AR||{};AR.onLinkedInLoad=function(){IN.Event.on(IN,"auth",AR.onLinkedInAuth)},doT.templateSettings.strip=!1,ZeroClipboard.config({swfPath:"/bower_components/zeroclipboard/dist/ZeroClipboard.swf"}),AR.onLinkedInAuth=function(){$("#msg").html(""),IN.API.Profile("me").fields(AR.fullProfileFields).result(function(a){AR.profile=AR.processProfile(a.values[0]),$("#btn-generate").click(function(){$("#msg").html(""),$("#rst-list").hide();var a=$(".carousel-inner > .item.active > input").val(),b=$(".carousel-inner > .item.active span.tmpl-type").html();$.ajax({url:a,success:function(a){try{var c=doT.template(a);AR.resumeStr=c(AR.profile),AR.resumeBlob=new Blob([AR.resumeStr],{type:"text/plain;charset=utf-8"});var d=doT.template($("#rst-tmpl").html());$("#rst-list").html(d(b)),$("#rst-list").show(),AR.bindZclip()}catch(e){$("#msg").html("Render template error: "+e.message)}},error:function(a,b,c){$("#msg").html(c)}})})})},AR.bindZclip=function(){AR.zclipClients&&ZeroClipboard.destroy(),AR.zclipClients=new ZeroClipboard($(".btn-copy")),AR.zclipClients.on("ready",function(){AR.zclipClients.on("beforecopy",function(){}),AR.zclipClients.on("copy",function(a){a.clipboardData.setData("text/plain",AR.resumeStr)}),AR.zclipClients.on("aftercopy",function(a){$(a.target).children("span").removeClass("hide").show()}),AR.zclipClients.on("error",function(a){console.log(a)})})},$(function(){var a=doT.template($("#item-tmpl").html());$("#carousel-tmpl div.carousel-inner").html(a(AR.templates)),$("#carousel-tmpl").carousel({interval:!1}),$("#btn-generate").click(function(){$("#msg").html("Please sign in LinkedIn first.")}),$(".btn-copy").on("click",function(){$(this).children("span").hide()}),document.addEventListener("keydown",function(a){var b=a.keyCode||a.which;73===b&&console.log(AR.profile)})});